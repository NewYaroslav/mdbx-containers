# libmdbx-wrapper.cmake
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib CACHE PATH "" FORCE)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib CACHE PATH "" FORCE)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin CACHE PATH "" FORCE)

set(MDBX_ENABLE_INSTALL OFF CACHE BOOL "" FORCE)
set(MDBX_BUILD_SHARED OFF CACHE BOOL "" FORCE)
set(MDBX_BUILD_STATIC ON CACHE BOOL "" FORCE)
set(MDBX_BUILD_TOOLS OFF CACHE BOOL "" FORCE)
set(MDBX_BUILD_EXAMPLES OFF CACHE BOOL "" FORCE)
set(MDBX_USE_VALGRIND OFF CACHE BOOL "" FORCE)

add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/../libmdbx EXCLUDE_FROM_ALL)

if (TARGET mdbx-static)
    message(STATUS "libmdbx-wrapper: using static MDBX from submodule.")
    set_target_properties(mdbx-static PROPERTIES
        ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib
    )
endif()

if (TARGET mdbx)
    set_target_properties(mdbx PROPERTIES
        ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib
    )
endif()
